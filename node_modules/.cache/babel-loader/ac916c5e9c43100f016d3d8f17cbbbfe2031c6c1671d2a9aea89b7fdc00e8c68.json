{"ast":null,"code":"import { frame } from 'motion-dom';\nimport { noop } from 'motion-utils';\nimport { useContext, useRef, useInsertionEffect } from 'react';\nimport { animateValue } from '../animation/animators/MainThreadAnimation.mjs';\nimport { MotionConfigContext } from '../context/MotionConfigContext.mjs';\nimport { useConstant } from '../utils/use-constant.mjs';\nimport { useIsomorphicLayoutEffect } from '../utils/use-isomorphic-effect.mjs';\nimport { useMotionValue } from './use-motion-value.mjs';\nimport { isMotionValue } from './utils/is-motion-value.mjs';\nfunction useSpring(source) {\n  let config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const {\n    isStatic\n  } = useContext(MotionConfigContext);\n  const activeSpringAnimation = useRef(null);\n  const initialValue = useConstant(() => isMotionValue(source) ? source.get() : source);\n  const unit = useConstant(() => typeof initialValue === \"string\" ? initialValue.replace(/[\\d.-]/g, \"\") : undefined);\n  const value = useMotionValue(initialValue);\n  const latestValue = useRef(initialValue);\n  const latestSetter = useRef(noop);\n  const startAnimation = () => {\n    stopAnimation();\n    activeSpringAnimation.current = animateValue({\n      keyframes: [asNumber(value.get()), asNumber(latestValue.current)],\n      velocity: value.getVelocity(),\n      type: \"spring\",\n      restDelta: 0.001,\n      restSpeed: 0.01,\n      ...config,\n      onUpdate: latestSetter.current\n    });\n  };\n  const stopAnimation = () => {\n    if (activeSpringAnimation.current) {\n      activeSpringAnimation.current.stop();\n    }\n  };\n  useInsertionEffect(() => {\n    return value.attach((v, set) => {\n      if (isStatic) return set(v);\n      latestValue.current = v;\n      latestSetter.current = latest => set(parseValue(latest, unit));\n      frame.postRender(startAnimation);\n      return value.get();\n    }, stopAnimation);\n  }, [JSON.stringify(config)]);\n  useIsomorphicLayoutEffect(() => {\n    if (isMotionValue(source)) {\n      return source.on(\"change\", v => value.set(parseValue(v, unit)));\n    }\n  }, [value, unit]);\n  return value;\n}\nfunction parseValue(v, unit) {\n  return unit ? v + unit : v;\n}\nfunction asNumber(v) {\n  return typeof v === \"number\" ? v : parseFloat(v);\n}\nexport { useSpring };","map":{"version":3,"names":["frame","noop","useContext","useRef","useInsertionEffect","animateValue","MotionConfigContext","useConstant","useIsomorphicLayoutEffect","useMotionValue","isMotionValue","useSpring","source","config","arguments","length","undefined","isStatic","activeSpringAnimation","initialValue","get","unit","replace","value","latestValue","latestSetter","startAnimation","stopAnimation","current","keyframes","asNumber","velocity","getVelocity","type","restDelta","restSpeed","onUpdate","stop","attach","v","set","latest","parseValue","postRender","JSON","stringify","on","parseFloat"],"sources":["D:/portfolio-master/node_modules/framer-motion/dist/es/value/use-spring.mjs"],"sourcesContent":["import { frame } from 'motion-dom';\r\nimport { noop } from 'motion-utils';\r\nimport { useContext, useRef, useInsertionEffect } from 'react';\r\nimport { animateValue } from '../animation/animators/MainThreadAnimation.mjs';\r\nimport { MotionConfigContext } from '../context/MotionConfigContext.mjs';\r\nimport { useConstant } from '../utils/use-constant.mjs';\r\nimport { useIsomorphicLayoutEffect } from '../utils/use-isomorphic-effect.mjs';\r\nimport { useMotionValue } from './use-motion-value.mjs';\r\nimport { isMotionValue } from './utils/is-motion-value.mjs';\r\n\r\nfunction useSpring(source, config = {}) {\r\n    const { isStatic } = useContext(MotionConfigContext);\r\n    const activeSpringAnimation = useRef(null);\r\n    const initialValue = useConstant(() => isMotionValue(source) ? source.get() : source);\r\n    const unit = useConstant(() => typeof initialValue === \"string\"\r\n        ? initialValue.replace(/[\\d.-]/g, \"\")\r\n        : undefined);\r\n    const value = useMotionValue(initialValue);\r\n    const latestValue = useRef(initialValue);\r\n    const latestSetter = useRef(noop);\r\n    const startAnimation = () => {\r\n        stopAnimation();\r\n        activeSpringAnimation.current = animateValue({\r\n            keyframes: [asNumber(value.get()), asNumber(latestValue.current)],\r\n            velocity: value.getVelocity(),\r\n            type: \"spring\",\r\n            restDelta: 0.001,\r\n            restSpeed: 0.01,\r\n            ...config,\r\n            onUpdate: latestSetter.current,\r\n        });\r\n    };\r\n    const stopAnimation = () => {\r\n        if (activeSpringAnimation.current) {\r\n            activeSpringAnimation.current.stop();\r\n        }\r\n    };\r\n    useInsertionEffect(() => {\r\n        return value.attach((v, set) => {\r\n            if (isStatic)\r\n                return set(v);\r\n            latestValue.current = v;\r\n            latestSetter.current = (latest) => set(parseValue(latest, unit));\r\n            frame.postRender(startAnimation);\r\n            return value.get();\r\n        }, stopAnimation);\r\n    }, [JSON.stringify(config)]);\r\n    useIsomorphicLayoutEffect(() => {\r\n        if (isMotionValue(source)) {\r\n            return source.on(\"change\", (v) => value.set(parseValue(v, unit)));\r\n        }\r\n    }, [value, unit]);\r\n    return value;\r\n}\r\nfunction parseValue(v, unit) {\r\n    return unit ? v + unit : v;\r\n}\r\nfunction asNumber(v) {\r\n    return typeof v === \"number\" ? v : parseFloat(v);\r\n}\r\n\r\nexport { useSpring };\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}