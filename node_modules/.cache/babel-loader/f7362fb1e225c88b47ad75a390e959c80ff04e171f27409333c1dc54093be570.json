{"ast":null,"code":"import { noop } from 'motion-utils';\nimport { startViewAnimation } from './start.mjs';\n\n/**\r\n * TODO:\r\n * - Create view transition on next tick\r\n * - Replace animations with Motion animations\r\n * - Return GroupAnimation on next tick\r\n */\nclass ViewTransitionBuilder {\n  constructor(update) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    this.currentTarget = \"root\";\n    this.targets = new Map();\n    this.notifyReady = noop;\n    this.readyPromise = new Promise(resolve => {\n      this.notifyReady = resolve;\n    });\n    queueMicrotask(() => {\n      startViewAnimation(update, options, this.targets).then(animation => this.notifyReady(animation));\n    });\n  }\n  get(selector) {\n    this.currentTarget = selector;\n    return this;\n  }\n  layout(keyframes, options) {\n    this.updateTarget(\"layout\", keyframes, options);\n    return this;\n  }\n  new(keyframes, options) {\n    this.updateTarget(\"new\", keyframes, options);\n    return this;\n  }\n  old(keyframes, options) {\n    this.updateTarget(\"old\", keyframes, options);\n    return this;\n  }\n  enter(keyframes, options) {\n    this.updateTarget(\"enter\", keyframes, options);\n    return this;\n  }\n  exit(keyframes, options) {\n    this.updateTarget(\"exit\", keyframes, options);\n    return this;\n  }\n  crossfade(options) {\n    this.updateTarget(\"enter\", {\n      opacity: 1\n    }, options);\n    this.updateTarget(\"exit\", {\n      opacity: 0\n    }, options);\n    return this;\n  }\n  updateTarget(target, keyframes) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    const {\n      currentTarget,\n      targets\n    } = this;\n    if (!targets.has(currentTarget)) {\n      targets.set(currentTarget, {});\n    }\n    const targetData = targets.get(currentTarget);\n    targetData[target] = {\n      keyframes,\n      options\n    };\n  }\n  then(resolve, reject) {\n    return this.readyPromise.then(resolve, reject);\n  }\n}\nfunction view(update) {\n  let defaultOptions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return new ViewTransitionBuilder(update, defaultOptions);\n}\nexport { ViewTransitionBuilder, view };","map":{"version":3,"names":["noop","startViewAnimation","ViewTransitionBuilder","constructor","update","options","arguments","length","undefined","currentTarget","targets","Map","notifyReady","readyPromise","Promise","resolve","queueMicrotask","then","animation","get","selector","layout","keyframes","updateTarget","new","old","enter","exit","crossfade","opacity","target","has","set","targetData","reject","view","defaultOptions"],"sources":["D:/portfolio-master/node_modules/motion-dom/dist/es/view/index.mjs"],"sourcesContent":["import { noop } from 'motion-utils';\r\nimport { startViewAnimation } from './start.mjs';\r\n\r\n/**\r\n * TODO:\r\n * - Create view transition on next tick\r\n * - Replace animations with Motion animations\r\n * - Return GroupAnimation on next tick\r\n */\r\nclass ViewTransitionBuilder {\r\n    constructor(update, options = {}) {\r\n        this.currentTarget = \"root\";\r\n        this.targets = new Map();\r\n        this.notifyReady = noop;\r\n        this.readyPromise = new Promise((resolve) => {\r\n            this.notifyReady = resolve;\r\n        });\r\n        queueMicrotask(() => {\r\n            startViewAnimation(update, options, this.targets).then((animation) => this.notifyReady(animation));\r\n        });\r\n    }\r\n    get(selector) {\r\n        this.currentTarget = selector;\r\n        return this;\r\n    }\r\n    layout(keyframes, options) {\r\n        this.updateTarget(\"layout\", keyframes, options);\r\n        return this;\r\n    }\r\n    new(keyframes, options) {\r\n        this.updateTarget(\"new\", keyframes, options);\r\n        return this;\r\n    }\r\n    old(keyframes, options) {\r\n        this.updateTarget(\"old\", keyframes, options);\r\n        return this;\r\n    }\r\n    enter(keyframes, options) {\r\n        this.updateTarget(\"enter\", keyframes, options);\r\n        return this;\r\n    }\r\n    exit(keyframes, options) {\r\n        this.updateTarget(\"exit\", keyframes, options);\r\n        return this;\r\n    }\r\n    crossfade(options) {\r\n        this.updateTarget(\"enter\", { opacity: 1 }, options);\r\n        this.updateTarget(\"exit\", { opacity: 0 }, options);\r\n        return this;\r\n    }\r\n    updateTarget(target, keyframes, options = {}) {\r\n        const { currentTarget, targets } = this;\r\n        if (!targets.has(currentTarget)) {\r\n            targets.set(currentTarget, {});\r\n        }\r\n        const targetData = targets.get(currentTarget);\r\n        targetData[target] = { keyframes, options };\r\n    }\r\n    then(resolve, reject) {\r\n        return this.readyPromise.then(resolve, reject);\r\n    }\r\n}\r\nfunction view(update, defaultOptions = {}) {\r\n    return new ViewTransitionBuilder(update, defaultOptions);\r\n}\r\n\r\nexport { ViewTransitionBuilder, view };\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}